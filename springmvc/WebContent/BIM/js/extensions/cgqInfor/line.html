<!DOCTYPE html>
<html style="height: 100%">
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta name="decorator" content="ani"/>
</head>
<body style="height: 100%; margin: 0">
<div id="cgq_more_info" style="height: 100%"></div>
<script type="text/javascript" src="../../echarts.js"></script>
<script src="./line.js"></script>
<script type="text/javascript" src="../../jquery-1.9.1.min.js"></script>
<script type="text/javascript">
    addLine()
    /*var dom = document.getElementById("cgq_more_info");
    var myChart = echarts.init(dom, 'dark');
    var app = {},startTime,currentTime,preTime;
    option = null;
    option = {
        title: {
            text: ''//温度湿度统计图

        },
        backgroundColor:"",
        tooltip: {
            trigger: 'axis'
        },
        legend: {
            data: ['温度', '湿度']
        },
        grid: {
            x: 50,
            y: 50,
            x2: 50,
            y2: 100,
            borderWidth: 1
        },
        xAxis: {
            type: 'category',
            onZero:false,
            onZeroAxisIndex:2,
            splitLine: {
                show: false
            },
            data: []
        },
        dataZoom: {
            show: true,
            start : 90
        },
        yAxis: [
            {
                type: 'value',
                name: '温度',
                axisLabel: {
                    formatter: '{value} °C'
                }
            },
            {
                type: 'value',
                axisLabel: {
                    formatter: '{value} %RH'
                }
            }
        ],
        series: [
            {
                name: '温度',
                type: 'line',
                yAxisIndex: 0,
                data: [11, 11, 15, 13, 12, 13, 10., 15, 3, 5, 8, 12, 15]
            },
            {
                name: '湿度',
                type: 'line',
                yAxisIndex: 1,
                data: [1, -2, 2, 5, 3, 2, 0, 3, 7, 9, 15, 20, 2]
            }
        ]
    };
    function getLocalTime() {
        var date = new Date();
        this.year = date.getFullYear();
        this.month = date.getMonth() + 1;
        this.date = date.getDate();
        this.hour = date.getHours() < 10 ? "0" + date.getHours() : date.getHours();
        this.minute = date.getMinutes() < 10 ? "0" + date.getMinutes() : date.getMinutes();
        this.second = date.getSeconds() < 10 ? "0" + date.getSeconds() : date.getSeconds();
        var preHour = (this.hour-2)< 10 ? "0" + (this.hour-2) : this.hour-2;
        startTime = this.year + "-" + this.month + "-" + this.date + " 0:00:00";
        preTime = this.year + "-" + this.month + "-" + this.date + " " + preHour + ":" + this.minute + ":" + this.second;
        currentTime = this.year + "-" + this.month + "-" + this.date + " " + this.hour + ":" + this.minute + ":" + this.second;
    }
    getLocalTime();
    $.ajax({
        url: "http://localhost:10080/BIM/a/bim/bimJzxx/getCgqLsxx",
        type: 'GET',
        data:{
            startTime:  startTime,
            currentTime: currentTime
        },
        dataType: "jsonp",
        success: function (res) {
            option.xAxis.data.length=0;
            option.series[0].data.length = 0;
            option.series[1].data.length = 0;
            res.map(function (item) {
                option.xAxis.data.push(item.TM);
                option.series[0].data.push(item.TEMPERATURE);
                option.series[1].data.push(item.HUMIDITY);
            });
            if (option && typeof option === "object") {
                myChart.setOption(option, true);
            }
        },
        error: function (res) {
            console.log(res);
        }
    });
    //setTimeout(showPre(),6000);*/
</script>
</body>
</html>